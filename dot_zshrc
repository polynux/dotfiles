source $HOME/.antidote/antidote.zsh
antidote load

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
autoload -Uz promptinit && promptinit && prompt powerlevel10k

export ZCONFIG="$HOME/.zsh"
export FZF_DIR="$ZCONFIG/fzf"
export EDITOR="lvim"
export GUI_EDITOR="vid" # neovide
export FZF_DEFAULT_COMMAND='find . \! \( -type d -path ./.git -prune \) \! -type d \! -name '\''*.tags'\'' -printf '\''%P\n'\'

PATH="$HOME/.local/bin:$HOME/.local/share/pnpm:/usr/local/go/bin:$PATH"

source "$HOME/.cargo/env"
source "$FZF_DIR/completion.zsh"
source "$FZF_DIR/key-bindings.zsh"
source "$ZCONFIG/keybindings.zsh"
source "$ZCONFIG/bw/bw-completions.zsh"

if [[ -s "/usr/bin/lsd" ]]; then
    alias ls="lsd"
fi
alias la="ls -a"
alias l="ls -la"
alias ll="ls -l"
alias vim="lvim"
alias svim="/usr/bin/vim"
alias rsc="ssh -A guillaume.dorce@rsc.bm-services.com 'cd /volumes/databases/; bash -li'"
alias arn="ssh -A guillaume.dorce@arena.bms.lan"
alias ta="tmux a"
alias gw="gulp watch"
alias colors="$HOME/.config/scripts/colors.sh"

alias ga="git add"
alias gaa="git add --all"
alias gst="git status"
alias gpr="git pull --rebase"

alias awtest="Xephyr :5 -screen 1600x900 & sleep 1 ; DISPLAY=:5 awesome"

alias cm="chezmoi"
alias cmcd="cd $(chezmoi source-path)"
alias cme="cm edit"
alias cma="cm apply -v"
alias cmd="cm diff"
alias cmu="cm update"

if [ -z "$SSH_AUTH_SOCK" ] ; then
    eval `ssh-agent -s`
    ssh-add
	clear
fi

# pnpm
export PNPM_HOME="$HOME/.local/share/pnpm"
export PATH="$PNPM_HOME:$PATH"
# pnpm end

# Bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# mkdir and cd in dir
function mkcd() {
    mkdir -p "$1"
    cd $1
}

# neovide binding
function vid() {
    if uname -r | grep 'microsoft' > /dev/null; then
        neovide.exe --wsl $@ &
    else
        neovide $@ &
    fi
}

HISTFILE="$HOME/.zsh_history"
HISTSIZE=10000
SAVEHIST=10000
setopt INC_APPEND_HISTORY
setopt HIST_IGNORE_ALL_DUPS 

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
